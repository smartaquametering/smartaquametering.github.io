<!DOCTYPE html>
<html lang="en">
	<head>

		<!-- Culori color library for JavaScript -->
		<script src="https://cdn.jsdelivr.net/npm/culori@0.18.0/build/culori.umd.min.js"></script>

	</head>
	<body>

		<h4 class="mt-4 mb-4">Yellowness Index in CIE-L*a*b* color space</h4>

		Standard: ASTM E 313-05, ASTM D1925 (deprecated)</br>
		Range: 0-850</br>
		Reference: C/°</br>

		<p>L = [100], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab100" width=600 height=600></canvas>

		<p>L = [90], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab90" width=600 height=600></canvas>

		<p>L = [80], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab80" width=600 height=600></canvas>

		<p>L = [70], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab70" width=600 height=600></canvas>

		<p>L = [60], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab60" width=600 height=600></canvas>

		<p>L = [50], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab50" width=600 height=600></canvas>

		<p>L = [40], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab40" width=600 height=600></canvas>

		<p>L = [30], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab30" width=600 height=600></canvas>

		<p>L = [20], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab20" width=600 height=600></canvas>

		<p>L = [10], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab10" width=600 height=600></canvas>

		<p>L = [0], a = [-150..+150], b = [-150..+150]</p>
		<canvas id="CIELab0" width=600 height=600></canvas>

		<script>

			var canvas100 = document.getElementById("CIELab100");
			var ctx100 = canvas100.getContext("2d");
			ctx100 = printCanvas(canvas100, ctx100, 100);

			var canvas90 = document.getElementById("CIELab90");
			var ctx90 = canvas90.getContext("2d");
			ctx90 = printCanvas(canvas90, ctx90, 90);

			var canvas80 = document.getElementById("CIELab80");
			var ctx80 = canvas80.getContext("2d");
			ctx80 = printCanvas(canvas80, ctx80, 80);

			var canvas70 = document.getElementById("CIELab70");
			var ctx70 = canvas70.getContext("2d");
			ctx70 = printCanvas(canvas70, ctx70, 70);

			var canvas60 = document.getElementById("CIELab60");
			var ctx60 = canvas60.getContext("2d");
			ctx60 = printCanvas(canvas60, ctx60, 60);

			var canvas50 = document.getElementById("CIELab50");
			var ctx50 = canvas50.getContext("2d");
			ctx50 = printCanvas(canvas50, ctx50, 50);

			var canvas40 = document.getElementById("CIELab40");
			var ctx40 = canvas40.getContext("2d");
			ctx40 = printCanvas(canvas40, ctx40, 40);

			var canvas30 = document.getElementById("CIELab30");
			var ctx30 = canvas30.getContext("2d");
			ctx30 = printCanvas(canvas30, ctx30, 30);

			var canvas20 = document.getElementById("CIELab20");
			var ctx20 = canvas20.getContext("2d");
			ctx20 = printCanvas(canvas20, ctx20, 20);

			var canvas10 = document.getElementById("CIELab10");
			var ctx10 = canvas10.getContext("2d");
			ctx10 = printCanvas(canvas10, ctx10, 10);

			var canvas0 = document.getElementById("CIELab0");
			var ctx0 = canvas0.getContext("2d");
			ctx0 = printCanvas(canvas0, ctx0, 0);

			function printCanvas(canvas, ctx, L) {
				var x;
				var y;
				var YI;
				var Index=new Array();

				for (x = 0; x <= canvas.width; x++) {
					for (y = 0; y <= canvas.height; y++) {
						let LAB = {mode: 'lab', l: L, a: -150+300*x/canvas.width, b: 150-300*y/canvas.height};
						let XYZ = culori.xyz(LAB);
						YI = ((100 * (1.2769 * XYZ.x - 1.0592 * XYZ.z)) / XYZ.y).toFixed(0);
						if (YI == 0.0) {
							ctx.fillStyle = '#000000';
							if (!Index[0]) {
								Index[0]=new Array();
								Index[0]['Color'] = 0;
								Index[0]['x'] = x + 5;
								Index[0]['y'] = y + 20;
							}
						} else if (YI == 50.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 100.0) {
							ctx.fillStyle = '#000000';
							if (!Index[1]) {
								Index[1]=new Array();
								Index[1]['Color'] = 100;
								Index[1]['x'] = x + 5;
								Index[1]['y'] = y + 20;
							}
						} else if (YI == 150.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 200.0) {
							ctx.fillStyle = '#000000';
							if (!Index[2]) {
								Index[2]=new Array();
								Index[2]['Color'] = 200;
								Index[2]['x'] = x + 5;
								Index[2]['y'] = y + 20;
							}
						} else if (YI == 250.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 300.0) {
							ctx.fillStyle = '#000000';
							if (!Index[3]) {
								Index[3]=new Array();
								Index[3]['Color'] = 300;
								Index[3]['x'] = x + 5;
								Index[3]['y'] = y + 20;
							}
						} else if (YI == 350.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 400.0) {
							ctx.fillStyle = '#000000';
							if (!Index[4]) {
								Index[4]=new Array();
								Index[4]['Color'] = 400;
								Index[4]['x'] = x + 5;
								Index[4]['y'] = y + 20;
							}
						} else if (YI == 450.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 500.0) {
							ctx.fillStyle = '#000000';
							if (!Index[5]) {
								Index[5]=new Array();
								Index[5]['Color'] = 500;
								Index[5]['x'] = x + 5;
								Index[5]['y'] = y + 20;
							}
						} else if (YI == 550.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 600.0) {
							ctx.fillStyle = '#000000';
							if (!Index[6]) {
								Index[6]=new Array();
								Index[6]['Color'] = 600;
								Index[6]['x'] = x + 5;
								Index[6]['y'] = y + 20;
							}
						} else if (YI == 650.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 700.0) {
							ctx.fillStyle = '#000000';
							if (!Index[7]) {
								Index[7]=new Array();
								Index[7]['Color'] = 700;
								Index[7]['x'] = x + 5;
								Index[7]['y'] = y + 20;
							}
						} else if (YI == 750.0) {
							ctx.fillStyle = '#000000';
						} else if (YI == 800.0) {
							ctx.fillStyle = '#000000';
							if (!Index[8]) {
								Index[8]=new Array();
								Index[8]['Color'] = 800;
								Index[8]['x'] = x + 5;
								Index[8]['y'] = y + 20;
							}
						} else if (YI == 850.0) {
							ctx.fillStyle = '#000000';
						} else {
							ctx.fillStyle = culori.formatRgb(LAB);
						}
						ctx.fillRect(x, y, 1, 1);
					}
				}
				ctx.font = "14px Arial";
				ctx.fillStyle = "black";

				if (Index[0]) {	ctx.fillText(Index[0]['Color'], Index[0]['x'], Index[0]['y']); }
				if (Index[1]) {	ctx.fillText(Index[1]['Color'], Index[1]['x'], Index[1]['y']); }
				if (Index[2]) {	ctx.fillText(Index[2]['Color'], Index[2]['x'], Index[2]['y']); }
				if (Index[3]) {	ctx.fillText(Index[3]['Color'], Index[3]['x'], Index[3]['y']); }
				if (Index[4]) {	ctx.fillText(Index[4]['Color'], Index[4]['x'], Index[4]['y']); }
				if (Index[5]) {	ctx.fillText(Index[5]['Color'], Index[5]['x'], Index[5]['y']); }
				if (Index[6]) {	ctx.fillText(Index[6]['Color'], Index[6]['x'], Index[6]['y']); }
				if (Index[7]) {	ctx.fillText(Index[7]['Color'], Index[7]['x'], Index[7]['y']); }
				if (Index[8]) {	ctx.fillText(Index[8]['Color'], Index[8]['x'], Index[8]['y']); }

				return(ctx);
			}

			//To check if an array is empty using javascript
			function arrayIsEmpty(array){
				//If it's not an array, return FALSE.
				if(!Array.isArray(array)){
					return FALSE;
				}
				//If it is an array, check its length property
				if(array.length == 0){
					//Return TRUE if the array is empty
					return true;
				}
				//Otherwise, return FALSE.
				return false;
			}
		</script>
	</body>
</html>
